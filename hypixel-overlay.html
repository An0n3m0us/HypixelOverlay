

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hypixel Overlay</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  </head>
  <style>
    html, body {
      background-color: rgba(0,0,0,0);
    }
    #container {
      display: flex;
      position: absolute;
      bottom: 0;
      top: 0;
      left: 0;
      right: 0;
      align-items: center;
      text-align: center;
      justify-content: center;
      background-color: rgba(0,0,0,0);
      border: 7px solid #FFFFFF00;
      color: #fff;
      font-family: 'Minecraftia', serif;
      font-size: 25px;
    }
  </style>
<body>
    <div id="container">
      <div id="activity" style="margin-top:-2px;">
        <div id="winstreakStats" style="display:none">
          <span id="winstreakNum" style="color:#55FF55">?</span>
          <span>winstreak</span>
        </div>
        <div id="winlossStats" style="display:none">
          <span id="winlossList">
            <span style="color:#000"> █</span>
            <span style="color:#000"> █</span>
            <span style="color:#000"> █</span>
            <span style="color:#000"> █</span>
            <span style="color:#000"> █</span>
            <span style="color:#000"> █</span>
            <span style="color:#000"> █</span>
            <span style="color:#000"> █</span>
            <span style="color:#000"> █</span>
            <span style="color:#000"> █</span>
          </span>
        </div>
      </div>
    </div>
    <script>
    const urlSearchParams = new URLSearchParams(window.location.search);
    const hypixel = Object.fromEntries(urlSearchParams.entries());
    var displayType = hypixel.type;
    container = document.getElementById("container");
    winstreakEl = document.getElementById("winstreakNum");
    winlossEl = document.getElementById("winlossList");

    var gameType = "";
    var gameMode = "";

    // Bedwars
    var bedwarsWins = -1;
    var bedwarsLosses = -1;

    Array.from(container.children[0].children).forEach((el) => { el.style.display = "none" });
    document.getElementById(displayType + "Stats").style.display = "block";

    function loop() {
        $.getJSON("https://api.hypixel.net/status?key=" + hypixel.key + "&uuid=" + hypixel.uuid, function(statusdata) {
            session = statusdata.session;

            if (session.online == true) {

                gameType = (session.gameType == "BEDWARS" ? "Bedwars" : session.gameType == "SKYWARS" ? "SkyWars" : "")
                gameMode = session.mode.toLowerCase().replace("bedwars_", "");

                if (gameType.match(/^(Bedwars|SkyWars)$/)) {
                    $.getJSON("https://api.hypixel.net/player?key=" + hypixel.key + "&uuid=" + hypixel.uuid, function(playerdata) {
                        stats = playerdata.player.stats[gameType];

                        if (gameType == "Bedwars") {
                            if (displayType == "winstreak" && (gameMode + "_winstreak") in stats) {
                                winstreakEl.innerText = stats[gameMode + "_winstreak"]
                            } else if (displayType == "winloss") {
                                if (bedwarsWins != -1 && bedwarsWins < stats["wins_bedwars"]) {
                                    winlossEl.innerHTML += "<span style='color:#55FF55'> █</span>".repeat(stats["wins_bedwars"] - bedwarsWins);
                                }
                                if (bedwarsLosses != -1 && bedwarsLosses < stats["losses_bedwars"]) {
                                    winlossEl.innerHTML += "<span style='color:#FF5555'> █</span>".repeat(stats["losses_bedwars"] - bedwarsLosses);
                                }

                                bedwarsWins = stats["wins_bedwars"];
                                bedwarsLosses = stats["losses_bedwars"];

                                // Limit to 10 games
                                if (winlossList.children.length > 10) {
                                    count = winlossList.children.length - 10;

                                    for (var index = 0; index < count; index += 1) {
                                        winlossList.removeChild(winlossList.children[0])
                                    }
                                }
                            }
                        } else if (gameType == "SkyWars") {
                            winstreakEl.innerText = stats["win_streak"];
                        }
                    });
                } else {
                    winstreakEl.innerText = "?";
                    winlossEl.innerText = "?";
                }
            }
        });

        setTimeout(function () {
            loop();
        }, 3 * 1000); // 3-second timeout
    };

    loop();
    </script>
  </body>
</html>
