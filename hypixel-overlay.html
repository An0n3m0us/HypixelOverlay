

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hypixel Overlay</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  </head>
  <style>
    html, body {
      background-color: rgba(0,0,0,0);
    }
    #container {
      display: flex;
      position: absolute;
      bottom: 0;
      top: 0;
      left: 0;
      right: 0;
      align-items: center;
      justify-content: center;
      text-align: center;
      background-color: rgba(0,0,0,0);
      border: 7px solid #FFFFFF00;
      color: #fff;
      font-family: 'Minecraftia', serif;
      font-size: 25px;
    }
  </style>
<body>
    <div id="container">
      <div id="activity" style="margin-top: -2px;">
        <span id="statText"></span>
      </div>
    </div>
    <script>
    const urlSearchParams = new URLSearchParams(window.location.search);
    const hypixel = Object.fromEntries(urlSearchParams.entries());

    var displayType = "winstreak"

    container = document.getElementById("activity");
    statEl = document.getElementById("statText");

    if (displayType == "winstreak") {
      statEl.innerText = "?";
      statEl.style.color = "#55FF55";

      displayText = document.createElement("span");
      displayText.innerText = "winstreak";
      container.appendChild(displayText);
    }

    var gameType = "";
    var gameMode = "";

    function loop() {
        $.getJSON("https://api.hypixel.net/status?key=" + hypixel.key + "&uuid=" + hypixel.uuid, function(statusdata) {
            session = statusdata.session;

            if (session.online == true) {

                gameType = (session.gameType == "BEDWARS" ? "Bedwars" : session.gameType == "SKYWARS" ? "SkyWars" : "")
                gameMode = session.mode.toLowerCase().replace("bedwars_", "");

                if (gameType.match(/Bedwars|SkyWars/g)) {
                    $.getJSON("https://api.hypixel.net/player?key=" + hypixel.key + "&uuid=" + hypixel.uuid, function(playerdata) {
                        stats = playerdata.player.stats[gameType];

                        if (displayType == "winstreak") {
                            statEl.innerText = ((gameType == "Bedwars" && (gameMode + "_winstreak") in stats) ? stats[gameMode + "_winstreak"] : "?")
                            statEl.innerText = ((gameType == "SkyWars") ? stats["win_streak"] : "?")
                        }
                    });
                } else {
                    statEl.innerText = "?";
                }
            }
        });

        setTimeout(function () {
            loop();
        }, 3 * 1000); // 3-second timeout
    };

    loop();
    </script>
  </body>
</html>
